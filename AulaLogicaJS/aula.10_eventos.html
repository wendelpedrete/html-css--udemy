<!doctype html>
<html>
    <head>
        <title>Curso Javascript Completo 2018</title>
        <meta charset="utf-8">
        
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/bootstrap-theme.css" rel="stylesheet">
        
        <script src="beluga.js"></script>

        <style>

            #d1 {
                background-color: red;
                padding: 25px;
            }

            span {
                background-color: yellow;
            }

        </style>

    </head>
    <body>
        <div class="container">
            <h1>Curso Javascript Completo 2018</h1>

            <button id="btn1" onclick="clicar()">Botão 1</button>
            <button id="btn2">Botão 2</button>
            <button id="btn3">Botão 3</button>

        </div>

        <div class="container">
            <h1>Propagação de eventos</h1>

            <div id="d1">
                texto dentro da div
                <span>texto dentro da span</span>
            </div>
        </div>

        <div class="container">
            <h1>Delegação de eventos</h1>
            <ul>
                <li>Lista 1</li>
                <li>Lista 2</li>
                <li>Lista 3</li>
            </ul>
        </div>

        <script>
            
            var btn2 = document.getElementById('btn2');
            var btn3 = document.getElementById('btn3');

            btn2.onclick = clicar;

            function clicar(){
                alert('Clicou');

                return function(){
                    alert('Clicou 2');
                }
            }

            btn3.addEventListener("click", function(){
                alert('Clicou com DOM level 2');
            })

            btn3.addEventListener("click", function(){
                alert('Clicou com DOM level 2 com outro evento');
            })

            var $d1 = document.querySelector('#d1');
            var $d1Span = document.querySelector('#d1 span');

            $d1.addEventListener("click", function(evt){
                console.log('click no $d1');
                evt.stopPropagation();
            });
            $d1Span.addEventListener("click", function(){
                console.log('click no $d1Span');
            })

            document.addEventListener("click", function(evt){

                console.log('clicou no documento');
                console.log(evt.currentTarget);
                console.log(evt.target);
                console.log(this);

            })

            var $ul = document.querySelector('ul');
            var $lis = document.querySelectorAll('li');

            // var x = 0;
            // while($lis[x]){
            //     $lis[x].addEventListener('click', function(e){
            //         e.stopPropagation();
            //         console.log('clicou na li');
            //     })
            //     x++;
            // }

            $ul.addEventListener('click', function(e){
                e.stopPropagation();
                console.log(this);
                console.log(e.target);
                console.log(e.currentTarget);

                console.log(e.target.nodeName);
                if(e.target.nodeName === "LI"){
                    alert('Clicou na li');
                }
            })

        </script>
        
    </body>
</html>